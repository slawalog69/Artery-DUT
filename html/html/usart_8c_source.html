<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>LLS5M проект: Исходный файл usart.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLS5M проект
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Поиск');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Титульная&#160;страница</span></a></li>
      <li><a href="modules.html"><span>Группы</span></a></li>
      <li><a href="annotated.html"><span>Классы</span></a></li>
      <li class="current"><a href="files.html"><span>Файлы</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Поиск" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>Файлы</span></a></li>
      <li><a href="globals.html"><span>Список&#160;членов&#160;всех&#160;файлов</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('usart_8c_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">usart.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="usart_8c.html">См. документацию.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="main_8h.html">main.h</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno"><a class="line" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">   10</a></span>&#160;  gpio_init_type <a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>;</div>
<div class="line"><a name="l00011"></a><span class="lineno"><a class="line" href="group__uarts.html#gafa0dca0f43e1383fbb21c32811b91266">   11</a></span>&#160;<a class="code" href="structuart__handler__t.html">uart_handler_t</a>  <a class="code" href="group__uarts.html#gafa0dca0f43e1383fbb21c32811b91266">huart1</a>;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#ifndef Digit_CAN </span></div>
<div class="line"><a name="l00014"></a><span class="lineno"><a class="line" href="group__uarts.html#gaae9ceac4895201be76ecae85c60ccff5">   14</a></span>&#160;<a class="code" href="structuart__handler__t.html">uart_handler_t</a>  <a class="code" href="group__uarts.html#gaae9ceac4895201be76ecae85c60ccff5">huart2</a>;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="group__uarts.html#gaf0d5f32797a3c781219d8fdfdb831ae4">   17</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> u32 <a class="code" href="group__uarts.html#gaf0d5f32797a3c781219d8fdfdb831ae4">table_baudrate</a>[<a class="code" href="group__uarts.html#ga6e176fd1d8375a74a4f90304d872511f">BAUDRATE_MAX</a>] ={</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;  0,</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;  1200,</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;  2400,</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;  4800,</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;  7200,</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;  9600,</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;  14400,</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  19200,</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  38400,</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  57600,</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  115200  </div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;};</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="group__uarts.html#ga054ecf21b70441570744dca4207d6c75">   31</a></span>&#160;<span class="keyword">static</span> <a class="code" href="group__uarts.html#ga2f1f0703b03cfbadaded76da0cfe69ec">e_State485</a> <a class="code" href="group__uarts.html#ga054ecf21b70441570744dca4207d6c75">STATE_485</a>;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__uarts.html#ga56081bd094ee795afae14c2994c0d19a">Switch_485_Rx</a>();</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__uarts.html#gab6e3a52c9a116ae73bd7df04419e0abb">Switch_485_Tx</a>();</div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="group__uarts.html#gae958bf8691e7124918817c509b0b4b69">   35</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structuart__handler__t.html">uart_handler_t</a>* <a class="code" href="group__uarts.html#gae958bf8691e7124918817c509b0b4b69">uart</a>[<a class="code" href="group__uarts.html#ggade254df27f4cf8ba2f9ae87df2e5ecf3ae709f06e2ed680349975d262dfe93a6a">QNT_OF_UART</a>];</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">/* USART1 init function */</span></div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="group__uarts.html#ga947cc171ff7ea8d25e707ce36a9c51b1">   38</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="group__uarts.html#ga947cc171ff7ea8d25e707ce36a9c51b1">UART_Ini</a>(<a class="code" href="structuart__handler__t.html">uart_handler_t</a>* p_huart){</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  p_huart-&gt;<a class="code" href="structuart__handler__t.html#a1d25116962a7e72cec3e3725fc1aa3fb">DATA_LEN</a> = USART_DATA_8BITS;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  p_huart-&gt;<a class="code" href="structuart__handler__t.html#a7187f3172c6bdfdd6c9912f06e7b9eac">PARITY</a> = USART_PARITY_NONE;  </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  p_huart-&gt;<a class="code" href="structuart__handler__t.html#a6f9eb3887a6e12714a8dba4cdce2e407">STOP_BITS</a> = USART_STOP_1_BIT;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    usart_init(p_huart-&gt;<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a> ,</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;               p_huart-&gt;<a class="code" href="structuart__handler__t.html#a4b36054905afc89fbd72b55be144bc9e">BaudRate</a>,</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;               p_huart-&gt;<a class="code" href="structuart__handler__t.html#a1d25116962a7e72cec3e3725fc1aa3fb">DATA_LEN</a> ,</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;               p_huart-&gt;<a class="code" href="structuart__handler__t.html#a6f9eb3887a6e12714a8dba4cdce2e407">STOP_BITS</a>);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  usart_parity_selection_config(p_huart-&gt;<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a> , p_huart-&gt;<a class="code" href="structuart__handler__t.html#a7187f3172c6bdfdd6c9912f06e7b9eac">PARITY</a>  );</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;}</div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="group__uarts.html#ga8a2affb985350de694f4a86e08226f75">   50</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__uarts.html#ga8a2affb985350de694f4a86e08226f75">Uart_ini</a>(<a class="code" href="group__uarts.html#gae2ba0ad082f30d5ed13df707e8a6071a">en_baudrate_t</a> en_baudrate){</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="keywordflow">if</span> ((en_baudrate &lt; <a class="code" href="group__uarts.html#gaa0153ed01e45dc62e9fdb0e4017ea6ab">BAUDRATE_MIN</a>) || (en_baudrate &gt; (<a class="code" href="group__uarts.html#ga6e176fd1d8375a74a4f90304d872511f">BAUDRATE_MAX</a>-1))) {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    en_baudrate = <a class="code" href="group__uarts.html#ggae2ba0ad082f30d5ed13df707e8a6071aa0664580bba46b3e0db74892b9bc8ff75">BR19200</a>; <span class="comment">// скорость по умолчанию, если входное значение вне диапазона</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  } </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="keywordflow">if</span>( huart1.<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a> == USART1){ </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    huart1.<a class="code" href="structuart__handler__t.html#a4b36054905afc89fbd72b55be144bc9e">BaudRate</a> = <a class="code" href="group__uarts.html#gaf0d5f32797a3c781219d8fdfdb831ae4">table_baudrate</a>[en_baudrate]; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    usart_enable(huart1.<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a> , FALSE);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="group__uarts.html#ga947cc171ff7ea8d25e707ce36a9c51b1">UART_Ini</a>(&amp;huart1);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    usart_enable(huart1.<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a> , TRUE);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  }</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#ifndef Digit_CAN </span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="keywordflow">if</span>(huart2.<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a> == USART2){</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    huart2.<a class="code" href="structuart__handler__t.html#a4b36054905afc89fbd72b55be144bc9e">BaudRate</a> = <a class="code" href="group__uarts.html#gaf0d5f32797a3c781219d8fdfdb831ae4">table_baudrate</a>[en_baudrate];</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    usart_enable(huart2.<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a> , FALSE); </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="group__uarts.html#ga947cc171ff7ea8d25e707ce36a9c51b1">UART_Ini</a>(&amp;huart2);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    usart_enable(huart2.<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a> , TRUE); </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  }</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;}</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="group__uarts.html#gae800228bb1a70c5b3536033e0aa6e133">   71</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__uarts.html#gae800228bb1a70c5b3536033e0aa6e133">usart_ch_br</a>(<a class="code" href="group__uarts.html#gae2ba0ad082f30d5ed13df707e8a6071a">en_baudrate_t</a> en_baudrate)</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;{</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <a class="code" href="group__uarts.html#ga8a2affb985350de694f4a86e08226f75">Uart_ini</a>( en_baudrate);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; }</div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="group__uarts.html#ga57d1167735baafab8e3288526c424929">   76</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__uarts.html#ga57d1167735baafab8e3288526c424929">MX_USART1_UART_Init</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;{</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="comment">/* enable the usart2 and gpio clock */</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  crm_periph_clock_enable(CRM_USART1_PERIPH_CLOCK, TRUE);  </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  crm_periph_clock_enable(<a class="code" href="main_8h.html#ab3c90e4e898e9909bc769fa16ef5da60">CRM_GPIO_RS485_TX_PERIPH_CLOCK</a> , TRUE);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  crm_periph_clock_enable(<a class="code" href="main_8h.html#a18edc7df1ce9a66f74a558bf05e98d9e">CRM_GPIO_RS485_RX_PERIPH_CLOCK</a> , TRUE);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  crm_periph_clock_enable(<a class="code" href="main_8h.html#a16b8ebec42963ed46bd2401878227663">CRM_GPIO_RS485_RE_DE_PERIPH_CLOCK</a>  , TRUE);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  gpio_default_para_init(&amp;<a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>.gpio_mode = GPIO_MODE_OUTPUT;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>.gpio_pins = <a class="code" href="main_8h.html#af59e10713e28d2925436043c35cecd6e">RS485_DE_Pin</a>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <a class="code" href="gpio_8c.html#a84f88a73b7bafb4c856cb7ba9f6fe8b5">gpio_init</a>( <a class="code" href="main_8h.html#aed428bd39090205f89119c3dcfb20f26">RS485_DE_GPIO_Port</a>  , &amp;<a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>.gpio_pins = <a class="code" href="main_8h.html#ab5d7b83b264f6bb5e52f8d7d006e396a">RS485_RE_Pin</a> ;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <a class="code" href="gpio_8c.html#a84f88a73b7bafb4c856cb7ba9f6fe8b5">gpio_init</a>( <a class="code" href="main_8h.html#a5b56665f8b448f779a1d9cd8e9f7d671">RS485_RE_GPIO_Port</a>   , &amp;<a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <a class="code" href="group__uarts.html#ga56081bd094ee795afae14c2994c0d19a">Switch_485_Rx</a>();</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;   </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>.gpio_pins =   <a class="code" href="main_8h.html#ab635ac383d4e81692e018fb73febf5f1">RS485_TX_Pin</a>; </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>.gpio_mode = GPIO_MODE_MUX;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <a class="code" href="gpio_8c.html#a84f88a73b7bafb4c856cb7ba9f6fe8b5">gpio_init</a>(<a class="code" href="main_8h.html#a942a7f576d7a6eb12e336c6c5d94826b">RS485_TX_GPIO_Port</a>  , &amp;<a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>);  </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>.gpio_mode = GPIO_MODE_INPUT;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>.gpio_pins =   <a class="code" href="main_8h.html#a08984c13e0171c5c7ee5a910bd265115">RS485_RX_Pin</a>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>.gpio_pull = GPIO_PULL_UP;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <a class="code" href="gpio_8c.html#a84f88a73b7bafb4c856cb7ba9f6fe8b5">gpio_init</a>( <a class="code" href="main_8h.html#a934296ef07692dfdd5be4ff9abbe0a4e">RS485_RX_GPIO_Port</a> , &amp;<a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  gpio_pin_remap_config(USART1_MUX,TRUE);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  nvic_irq_enable(USART1_IRQn, 1, 0);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  huart1.<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a> = USART1;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  huart1.<a class="code" href="structuart__handler__t.html#a4b36054905afc89fbd72b55be144bc9e">BaudRate</a> = 19200;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  huart1.<a class="code" href="structuart__handler__t.html#a1d25116962a7e72cec3e3725fc1aa3fb">DATA_LEN</a> = USART_DATA_8BITS;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  huart1.<a class="code" href="structuart__handler__t.html#a7187f3172c6bdfdd6c9912f06e7b9eac">PARITY</a> = USART_PARITY_NONE;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  huart1.<a class="code" href="structuart__handler__t.html#a6f9eb3887a6e12714a8dba4cdce2e407">STOP_BITS</a>= USART_STOP_1_BIT;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <a class="code" href="group__uarts.html#ga947cc171ff7ea8d25e707ce36a9c51b1">UART_Ini</a>(&amp;huart1);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  usart_transmitter_enable(huart1.<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a> , TRUE); </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  usart_receiver_enable(huart1.<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a> , TRUE);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  usart_enable(huart1.<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a> , TRUE);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  usart_flag_clear(huart1.<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a> ,USART_CTSCF_FLAG|</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                   USART_BFF_FLAG |USART_TDC_FLAG | USART_RDBF_FLAG );</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  usart_interrupt_enable(huart1.<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a>,USART_RDBF_INT,TRUE );</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  huart1.<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a77cb6c587fae3afb40c4f801cc2b8903">indexCash</a> =0;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  huart1.<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a4b2102021a91bfb2b730d93f4e521aa8">pCurrDataRx</a> = &amp;huart1.<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a0f4e3feeece2d07c67431b0702eb6c54">CshBuf</a>[0];</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  uart[<a class="code" href="group__uarts.html#ggade254df27f4cf8ba2f9ae87df2e5ecf3a5f3c300be3cf695e81290fbc18088d17">RS485</a> ] = &amp;<a class="code" href="group__uarts.html#gafa0dca0f43e1383fbb21c32811b91266">huart1</a>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;}</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="group__uarts.html#ga052088fe5bb3f807a4b2502e664fd4fd">  126</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__uarts.html#ga052088fe5bb3f807a4b2502e664fd4fd">MX_USART2_UART_Init</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;{</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="preprocessor">#ifndef Digit_CAN  </span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="comment">/* enable the usart2 and gpio clock */</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  crm_periph_clock_enable(CRM_USART2_PERIPH_CLOCK, TRUE);  </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  crm_periph_clock_enable(<a class="code" href="main_8h.html#af5409007c74bc59e4fe850e2b65ef52d">CRM_GPIO_RS232_TX_PERIPH_CLOCK</a> , TRUE);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  crm_periph_clock_enable(<a class="code" href="main_8h.html#a1a3c0c7e393b80364cad917a8f72c5df">CRM_GPIO_RS232_RX_PERIPH_CLOCK</a>  , TRUE);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  gpio_default_para_init(&amp;<a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>);  </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>.gpio_mode = GPIO_MODE_MUX;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>.gpio_pins =  <a class="code" href="main_8h.html#abfb5fe8738e6b19b5479da60668372dd">RS232_TX_Pin</a>; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <a class="code" href="gpio_8c.html#a84f88a73b7bafb4c856cb7ba9f6fe8b5">gpio_init</a>(<a class="code" href="main_8h.html#a52156f353d041e6ea7d8a0ba9afb4ddd">RS232_TX_GPIO_Port</a> , &amp;<a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>);  </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">/* configure the usart2 rx pin */</span>  </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>.gpio_mode = GPIO_MODE_INPUT;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>.gpio_pins = <a class="code" href="main_8h.html#a047e1624760aa8b1025e7f151fd27b8b">RS232_RX_Pin</a> ;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>.gpio_pull = GPIO_PULL_UP;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <a class="code" href="gpio_8c.html#a84f88a73b7bafb4c856cb7ba9f6fe8b5">gpio_init</a>(<a class="code" href="main_8h.html#a3244f8f343a755a3d384a7b1aa493b7a">RS232_RX_GPIO_Port</a> , &amp;<a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  nvic_irq_enable(USART2_IRQn, 2, 0);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  huart2.<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a> = USART2;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  huart2.<a class="code" href="structuart__handler__t.html#a4b36054905afc89fbd72b55be144bc9e">BaudRate</a> = 19200;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  huart2.<a class="code" href="structuart__handler__t.html#a1d25116962a7e72cec3e3725fc1aa3fb">DATA_LEN</a> = USART_DATA_8BITS;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  huart2.<a class="code" href="structuart__handler__t.html#a7187f3172c6bdfdd6c9912f06e7b9eac">PARITY</a> = USART_PARITY_NONE;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  huart2.<a class="code" href="structuart__handler__t.html#a6f9eb3887a6e12714a8dba4cdce2e407">STOP_BITS</a>= USART_STOP_1_BIT;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <a class="code" href="group__uarts.html#ga947cc171ff7ea8d25e707ce36a9c51b1">UART_Ini</a>(&amp;huart2);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  usart_transmitter_enable(huart2.<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a> , TRUE); </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  usart_receiver_enable(huart2.<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a> , TRUE);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  usart_enable(huart2.<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a> , TRUE);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  usart_flag_clear(huart2.<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a> ,USART_CTSCF_FLAG|</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                   USART_BFF_FLAG |USART_TDC_FLAG | USART_RDBF_FLAG );</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  usart_interrupt_enable(huart2.<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a>,USART_RDBF_INT,TRUE );</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  huart2.<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a77cb6c587fae3afb40c4f801cc2b8903">indexCash</a> =0;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  huart2.<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a4b2102021a91bfb2b730d93f4e521aa8">pCurrDataRx</a> = &amp;huart2.<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a0f4e3feeece2d07c67431b0702eb6c54">CshBuf</a>[0];</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  uart[<a class="code" href="group__uarts.html#ggade254df27f4cf8ba2f9ae87df2e5ecf3a17ec828a427341ae4267c3c827ca4104">RS232</a>] = &amp;<a class="code" href="group__uarts.html#gaae9ceac4895201be76ecae85c60ccff5">huart2</a>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;}</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="group__uarts.html#ga086619e845227dc6717d4b4b482e918b">  167</a></span>&#160;<span class="keywordtype">void</span>  <a class="code" href="group__uarts.html#ga086619e845227dc6717d4b4b482e918b">UART_MspDeInit</a>(<a class="code" href="structuart__handler__t.html">uart_handler_t</a> * uartHandle)</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;{</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keywordflow">if</span>(uartHandle-&gt;<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a>==USART1)</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  { </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    nvic_irq_disable(USART1_IRQn ); </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  crm_periph_clock_enable(CRM_USART1_PERIPH_CLOCK,FALSE); </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  gpio_default_para_init(&amp;<a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>); </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>.gpio_pins =   <a class="code" href="main_8h.html#ab635ac383d4e81692e018fb73febf5f1">RS485_TX_Pin</a> ; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <a class="code" href="gpio_8c.html#a84f88a73b7bafb4c856cb7ba9f6fe8b5">gpio_init</a>(<a class="code" href="main_8h.html#a942a7f576d7a6eb12e336c6c5d94826b">RS485_TX_GPIO_Port</a>, &amp;<a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>.gpio_pins = <a class="code" href="main_8h.html#a08984c13e0171c5c7ee5a910bd265115">RS485_RX_Pin</a>  ; </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <a class="code" href="gpio_8c.html#a84f88a73b7bafb4c856cb7ba9f6fe8b5">gpio_init</a>(<a class="code" href="main_8h.html#a934296ef07692dfdd5be4ff9abbe0a4e">RS485_RX_GPIO_Port</a>, &amp;<a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>.gpio_pins =   <a class="code" href="main_8h.html#ab5d7b83b264f6bb5e52f8d7d006e396a">RS485_RE_Pin</a> ; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <a class="code" href="gpio_8c.html#a84f88a73b7bafb4c856cb7ba9f6fe8b5">gpio_init</a>(<a class="code" href="main_8h.html#a5b56665f8b448f779a1d9cd8e9f7d671">RS485_RE_GPIO_Port</a> , &amp;<a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>.gpio_pins =  <a class="code" href="main_8h.html#af59e10713e28d2925436043c35cecd6e">RS485_DE_Pin</a>   ; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <a class="code" href="gpio_8c.html#a84f88a73b7bafb4c856cb7ba9f6fe8b5">gpio_init</a>(<a class="code" href="main_8h.html#aed428bd39090205f89119c3dcfb20f26">RS485_DE_GPIO_Port</a>  , &amp;<a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  }</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(uartHandle-&gt;<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a>==USART2)</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    nvic_irq_disable(USART2_IRQn ); </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  crm_periph_clock_enable(CRM_USART2_PERIPH_CLOCK,FALSE);  </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  gpio_default_para_init(&amp;<a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>); </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>.gpio_pins =  <a class="code" href="main_8h.html#abfb5fe8738e6b19b5479da60668372dd">RS232_TX_Pin</a>   ; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <a class="code" href="gpio_8c.html#a84f88a73b7bafb4c856cb7ba9f6fe8b5">gpio_init</a>(<a class="code" href="main_8h.html#a52156f353d041e6ea7d8a0ba9afb4ddd">RS232_TX_GPIO_Port</a> , &amp;<a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>.gpio_pins = <a class="code" href="main_8h.html#a047e1624760aa8b1025e7f151fd27b8b">RS232_RX_Pin</a>;   </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <a class="code" href="gpio_8c.html#a84f88a73b7bafb4c856cb7ba9f6fe8b5">gpio_init</a>(<a class="code" href="main_8h.html#a3244f8f343a755a3d384a7b1aa493b7a">RS232_RX_GPIO_Port</a> , &amp;<a class="code" href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a>); </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;} </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div>
<div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="group__uarts.html#gaa7c53fd22f1fd7d50ec835f785e9123b">  198</a></span>&#160;<span class="keyword">inline</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="group__uarts.html#gaa7c53fd22f1fd7d50ec835f785e9123b">resetRx</a>(<a class="code" href="structuart__handler__t.html">uart_handler_t</a> *p_uart_hndl){</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a151bb1071a12318545a6fca8b18770eb">tail</a> =0xFF;  </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a4b2102021a91bfb2b730d93f4e521aa8">pCurrDataRx</a>-&gt;  flg_has_data =0;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a4b2102021a91bfb2b730d93f4e521aa8">pCurrDataRx</a>-&gt; data_cnt  =0; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a4b2102021a91bfb2b730d93f4e521aa8">pCurrDataRx</a>-&gt; head   =0; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a03264ffced2f2f9ac2231d4dcb991750">TimeOut</a> = 0;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keywordflow">if</span>(p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a> == USART1)  <span class="comment">// RS485</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="group__uarts.html#ga054ecf21b70441570744dca4207d6c75">STATE_485</a> == <a class="code" href="group__uarts.html#gga2f1f0703b03cfbadaded76da0cfe69ecabe602b24239fa21262ee8617dc9417b1">ON_BUSY_RX</a>)<a class="code" href="group__uarts.html#ga054ecf21b70441570744dca4207d6c75">STATE_485</a> = <a class="code" href="group__uarts.html#gga2f1f0703b03cfbadaded76da0cfe69ecaf120996068493db5680d0b44f9229807">ON_RX</a>; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;}</div>
<div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="group__uarts.html#ga94efa9200251a84749aaeb3a94817315">  210</a></span>&#160; <span class="keywordtype">void</span> <a class="code" href="group__uarts.html#ga94efa9200251a84749aaeb3a94817315">WD_TimeOut_Cb</a>(<a class="code" href="group__uarts.html#gade254df27f4cf8ba2f9ae87df2e5ecf3">uart_name_t</a> <a class="code" href="protocol_8h.html#a77d5d17787037bbb21347a684a46d947">name</a> ){</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <a class="code" href="structuart__handler__t.html">uart_handler_t</a> *p_uart_hndl = uart[<a class="code" href="protocol_8h.html#a77d5d17787037bbb21347a684a46d947">name</a>];</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordflow">if</span>(p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a03264ffced2f2f9ac2231d4dcb991750">TimeOut</a>){</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">if</span>(p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a03264ffced2f2f9ac2231d4dcb991750">TimeOut</a> == 1)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <a class="code" href="group__uarts.html#gaa7c53fd22f1fd7d50ec835f785e9123b">resetRx</a>(p_uart_hndl); </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a03264ffced2f2f9ac2231d4dcb991750">TimeOut</a>--;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  } </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; }</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div>
<div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="group__uarts.html#ga0f6c7c382009c8c58f5f34cae689e60a">  219</a></span>&#160;u8 <a class="code" href="group__uarts.html#ga0f6c7c382009c8c58f5f34cae689e60a">usart_get_msg</a>(<a class="code" href="group__uarts.html#gade254df27f4cf8ba2f9ae87df2e5ecf3">uart_name_t</a> <a class="code" href="protocol_8h.html#a77d5d17787037bbb21347a684a46d947">name</a>, uint8_t *p_data, <span class="keywordtype">int</span>* pCnt, <a class="code" href="group__uarts.html#ga3fae01b3cdbc182c3711fa316c0c982b">typeInpPack</a> * Type){</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <a class="code" href="structuart__handler__t.html">uart_handler_t</a> *p_uart_hndl = uart[<a class="code" href="protocol_8h.html#a77d5d17787037bbb21347a684a46d947">name</a>];</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keywordflow">for</span>(u8 c=0;c&lt;<a class="code" href="group__uarts.html#ga5c6e235e024a5a41e8c586a580891853">CASH_LEVEL</a>; c++){ </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <a class="code" href="struct_cash_buff_rx.html">CashBuffRx</a>* PCashData = &amp;p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a0f4e3feeece2d07c67431b0702eb6c54">CshBuf</a>[c]; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">if</span>( PCashData-&gt;<a class="code" href="struct_cash_buff_rx.html#af32b1fbe3899533624165d9917457e46">flg_has_data</a> !=0){</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      <a class="code" href="_d_s18_b20_cl_8cpp.html#a6b1e92c01ca22bfae2d718f5f9159936">memcpy</a>(p_data,PCashData-&gt;<a class="code" href="struct_cash_buff_rx.html#ab5b7d59224b89ac190735c1f59ac2335">buffer</a>,PCashData-&gt;<a class="code" href="struct_cash_buff_rx.html#af9ffaf00f288857651b3b5fd57337ca4">data_cnt</a>);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      *pCnt = PCashData-&gt;<a class="code" href="struct_cash_buff_rx.html#af9ffaf00f288857651b3b5fd57337ca4">data_cnt</a>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      *Type = (<a class="code" href="group__uarts.html#ga3fae01b3cdbc182c3711fa316c0c982b">typeInpPack</a>)PCashData-&gt;<a class="code" href="struct_cash_buff_rx.html#affbdbbc5f703ff3aefdb94877c3c9d19">head</a>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">//          resetRx(p_uart_hndl); </span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      PCashData-&gt;<a class="code" href="struct_cash_buff_rx.html#af32b1fbe3899533624165d9917457e46">flg_has_data</a> =0;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">//      PCashData-&gt;data_cnt =0;</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <span class="keywordflow">return</span>  <a class="code" href="error_8h.html#af71150c123488664ae92c6759b48af4d">ERROR_OK</a>;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  }</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="error_8h.html#a11e1c0af99e0270609a63a86b45e5ea5">ERROR_NO_DATA</a>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;}</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div>
<div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="group__uarts.html#ga56081bd094ee795afae14c2994c0d19a">  240</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__uarts.html#ga56081bd094ee795afae14c2994c0d19a">Switch_485_Rx</a>(){</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <a class="code" href="main_8h.html#a5b56665f8b448f779a1d9cd8e9f7d671">RS485_RE_GPIO_Port</a>-&gt; clr = <a class="code" href="main_8h.html#ab5d7b83b264f6bb5e52f8d7d006e396a">RS485_RE_Pin</a> | <a class="code" href="main_8h.html#af59e10713e28d2925436043c35cecd6e">RS485_DE_Pin</a>; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <a class="code" href="group__uarts.html#ga054ecf21b70441570744dca4207d6c75">STATE_485</a> = <a class="code" href="group__uarts.html#gga2f1f0703b03cfbadaded76da0cfe69ecaf120996068493db5680d0b44f9229807">ON_RX</a>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;}</div>
<div class="line"><a name="l00244"></a><span class="lineno"><a class="line" href="group__uarts.html#gab6e3a52c9a116ae73bd7df04419e0abb">  244</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__uarts.html#gab6e3a52c9a116ae73bd7df04419e0abb">Switch_485_Tx</a>(){ </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <a class="code" href="main_8h.html#aed428bd39090205f89119c3dcfb20f26">RS485_DE_GPIO_Port</a>-&gt;scr = <a class="code" href="main_8h.html#af59e10713e28d2925436043c35cecd6e">RS485_DE_Pin</a> | <a class="code" href="main_8h.html#ab5d7b83b264f6bb5e52f8d7d006e396a">RS485_RE_Pin</a>;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <a class="code" href="group__uarts.html#ga054ecf21b70441570744dca4207d6c75">STATE_485</a> = <a class="code" href="group__uarts.html#gga2f1f0703b03cfbadaded76da0cfe69ecad235dacec3a2352d37b5d9602defa9f1">ON_TX</a>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;}</div>
<div class="line"><a name="l00248"></a><span class="lineno"><a class="line" href="group__uarts.html#gad2eaec0611d51858a3967868119b3fc5">  248</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__uarts.html#gad2eaec0611d51858a3967868119b3fc5">usart_tx_data</a>(<a class="code" href="group__uarts.html#gade254df27f4cf8ba2f9ae87df2e5ecf3">uart_name_t</a> <a class="code" href="protocol_8h.html#a77d5d17787037bbb21347a684a46d947">name</a>, uint8_t *p_data, uint8_t len)</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;{ </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="keywordflow">if</span>(name == <a class="code" href="group__uarts.html#ggade254df27f4cf8ba2f9ae87df2e5ecf3a5f3c300be3cf695e81290fbc18088d17">RS485</a>){ </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">while</span>(<a class="code" href="group__uarts.html#ga054ecf21b70441570744dca4207d6c75">STATE_485</a> != <a class="code" href="group__uarts.html#gga2f1f0703b03cfbadaded76da0cfe69ecaf120996068493db5680d0b44f9229807">ON_RX</a>){}; <span class="comment">// wait untill previos data is send or recieved</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <a class="code" href="group__uarts.html#gab6e3a52c9a116ae73bd7df04419e0abb">Switch_485_Tx</a>();</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    uart[<a class="code" href="protocol_8h.html#a77d5d17787037bbb21347a684a46d947">name</a>]-&gt;<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a>-&gt;ctrl1_bit.rdbfien  = 0;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  } </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <a class="code" href="_d_s18_b20_cl_8cpp.html#a6b1e92c01ca22bfae2d718f5f9159936">memcpy</a>(uart[name]-&gt;tx.buffer,p_data,len);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  uart[<a class="code" href="protocol_8h.html#a77d5d17787037bbb21347a684a46d947">name</a>]-&gt;<a class="code" href="structuart__handler__t.html#a452c0fe767bc8a46fa89a9c6168d03e8">tx</a>.<a class="code" href="structuart__data___t_x__t.html#a8c31dcd6c82b68ca4fc4ab67638419fe">pData</a> = uart[<a class="code" href="protocol_8h.html#a77d5d17787037bbb21347a684a46d947">name</a>]-&gt;<a class="code" href="structuart__handler__t.html#a452c0fe767bc8a46fa89a9c6168d03e8">tx</a>.<a class="code" href="structuart__data___t_x__t.html#a0b56dc3690dda140f83c3d702c0a41d8">buffer</a>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  uart[<a class="code" href="protocol_8h.html#a77d5d17787037bbb21347a684a46d947">name</a>]-&gt;<a class="code" href="structuart__handler__t.html#a452c0fe767bc8a46fa89a9c6168d03e8">tx</a>.<a class="code" href="structuart__data___t_x__t.html#a4bd87c601c9b6f4bd17294107b9e9e92">data_cnt</a> = len;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  uart[<a class="code" href="protocol_8h.html#a77d5d17787037bbb21347a684a46d947">name</a>]-&gt;<a class="code" href="structuart__handler__t.html#a452c0fe767bc8a46fa89a9c6168d03e8">tx</a>.<a class="code" href="structuart__data___t_x__t.html#a8c89910f8c27c0ee419808b289107f59">flg_has_data</a>  = 1;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  uart[<a class="code" href="protocol_8h.html#a77d5d17787037bbb21347a684a46d947">name</a>]-&gt;<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a> -&gt;dt = (* uart[<a class="code" href="protocol_8h.html#a77d5d17787037bbb21347a684a46d947">name</a>]-&gt;<a class="code" href="structuart__handler__t.html#a452c0fe767bc8a46fa89a9c6168d03e8">tx</a>.<a class="code" href="structuart__data___t_x__t.html#a8c31dcd6c82b68ca4fc4ab67638419fe">pData</a>) &amp; 0x00FF; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  uart[<a class="code" href="protocol_8h.html#a77d5d17787037bbb21347a684a46d947">name</a>]-&gt;<a class="code" href="structuart__handler__t.html#a452c0fe767bc8a46fa89a9c6168d03e8">tx</a>.<a class="code" href="structuart__data___t_x__t.html#a8c31dcd6c82b68ca4fc4ab67638419fe">pData</a> ++;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  uart[<a class="code" href="protocol_8h.html#a77d5d17787037bbb21347a684a46d947">name</a>]-&gt;<a class="code" href="structuart__handler__t.html#a452c0fe767bc8a46fa89a9c6168d03e8">tx</a>.<a class="code" href="structuart__data___t_x__t.html#a4bd87c601c9b6f4bd17294107b9e9e92">data_cnt</a> --;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  uart[<a class="code" href="protocol_8h.html#a77d5d17787037bbb21347a684a46d947">name</a>]-&gt;<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a>-&gt;ctrl1_bit.tdbeien = 1;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;}</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div>
<div class="line"><a name="l00266"></a><span class="lineno"><a class="line" href="group__uarts.html#ga7919e306d2ca3d2c2cda1b5b0c4dad1c">  266</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__uarts.html#ga7919e306d2ca3d2c2cda1b5b0c4dad1c">usart_is_tx_busy</a>(<a class="code" href="group__uarts.html#gade254df27f4cf8ba2f9ae87df2e5ecf3">uart_name_t</a> <a class="code" href="protocol_8h.html#a77d5d17787037bbb21347a684a46d947">name</a>){</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordflow">return</span> (uart[name]-&gt;tx.flg_has_data);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;}</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="group__irq__uarts.html#ga4fd84fb4151684cda8f85fdedd50320f">  275</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__irq__uarts.html#ga4fd84fb4151684cda8f85fdedd50320f">UART_RxCpltCallback</a>(<a class="code" href="group__uarts.html#gade254df27f4cf8ba2f9ae87df2e5ecf3">uart_name_t</a> <a class="code" href="protocol_8h.html#a77d5d17787037bbb21347a684a46d947">name</a>, u8 Data  )</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;{</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keywordflow">if</span> (name  &gt;= <a class="code" href="group__uarts.html#ggade254df27f4cf8ba2f9ae87df2e5ecf3ae709f06e2ed680349975d262dfe93a6a">QNT_OF_UART</a>)<span class="keywordflow">return</span>;  </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <a class="code" href="structuart__handler__t.html">uart_handler_t</a> *p_uart_hndl = uart[<a class="code" href="protocol_8h.html#a77d5d17787037bbb21347a684a46d947">name</a>]; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <a class="code" href="struct_cash_buff_rx.html">CashBuffRx</a>* pTmpDataRx = p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a4b2102021a91bfb2b730d93f4e521aa8">pCurrDataRx</a>;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keywordflow">if</span>((pTmpDataRx-&gt;<a class="code" href="struct_cash_buff_rx.html#af9ffaf00f288857651b3b5fd57337ca4">data_cnt</a> == 0)&amp;&amp;(name == <a class="code" href="group__uarts.html#ggade254df27f4cf8ba2f9ae87df2e5ecf3a5f3c300be3cf695e81290fbc18088d17">RS485</a>))</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="group__uarts.html#ga054ecf21b70441570744dca4207d6c75">STATE_485</a> = <a class="code" href="group__uarts.html#gga2f1f0703b03cfbadaded76da0cfe69ecabe602b24239fa21262ee8617dc9417b1">ON_BUSY_RX</a>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="keywordflow">if</span>( pTmpDataRx-&gt;<a class="code" href="struct_cash_buff_rx.html#af9ffaf00f288857651b3b5fd57337ca4">data_cnt</a> == 2){</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    pTmpDataRx-&gt;<a class="code" href="struct_cash_buff_rx.html#affbdbbc5f703ff3aefdb94877c3c9d19">head</a> = 0;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">//    u8* omni_adress = &amp;pTmpDataRx-&gt;buffer[0]; // for modbus</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">if</span> ((pTmpDataRx-&gt;<a class="code" href="struct_cash_buff_rx.html#ab5b7d59224b89ac190735c1f59ac2335">buffer</a>[0] == <a class="code" href="protocol_8h.html#af4e69e53bfec6093eea1373944323cd3">PREFIX_INCOMING</a>)&amp;&amp; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;       ((pTmpDataRx-&gt;<a class="code" href="struct_cash_buff_rx.html#ab5b7d59224b89ac190735c1f59ac2335">buffer</a>[1]   == <a class="code" href="protocol_8h.html#a6764d9864b9d0e3c5d0f7e71f14495c1">getDevAdr</a>())||<span class="comment">// dev_addr || broadcast</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;         (pTmpDataRx-&gt;<a class="code" href="struct_cash_buff_rx.html#ab5b7d59224b89ac190735c1f59ac2335">buffer</a>[1]==  0xFF))){</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        pTmpDataRx-&gt;<a class="code" href="struct_cash_buff_rx.html#affbdbbc5f703ff3aefdb94877c3c9d19">head</a> = 1; <span class="comment">//  omnicom </span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    }</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>((pTmpDataRx-&gt;<a class="code" href="struct_cash_buff_rx.html#ab5b7d59224b89ac190735c1f59ac2335">buffer</a>[0] == <a class="code" href="protocol_8h.html#a6764d9864b9d0e3c5d0f7e71f14495c1">getDevAdr</a>())&amp;&amp; </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      ((pTmpDataRx-&gt;<a class="code" href="struct_cash_buff_rx.html#ab5b7d59224b89ac190735c1f59ac2335">buffer</a>[1]  ==  <a class="code" href="protocol_8h.html#adccb52e083d60cde3230b7075a073bd3">MB_FUNCTION_READ_HOLDING_REGISTERS</a>)||</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;       (pTmpDataRx-&gt;<a class="code" href="struct_cash_buff_rx.html#ab5b7d59224b89ac190735c1f59ac2335">buffer</a>[1]  ==  <a class="code" href="protocol_8h.html#a008292c215ba190bd1f3c2adac5f064e">MB_FUNCTION_READ_INPUT_REGISTERS</a>))){</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;         pTmpDataRx-&gt;<a class="code" href="struct_cash_buff_rx.html#affbdbbc5f703ff3aefdb94877c3c9d19">head</a> = 2; <span class="comment">//  modbus   </span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;         p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a151bb1071a12318545a6fca8b18770eb">tail</a> = 8; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;         </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;       } <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <a class="code" href="group__uarts.html#gaa7c53fd22f1fd7d50ec835f785e9123b">resetRx</a>(p_uart_hndl);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">if</span>(pTmpDataRx-&gt;<a class="code" href="struct_cash_buff_rx.html#affbdbbc5f703ff3aefdb94877c3c9d19">head</a> == 1){ <span class="comment">//   omnicom </span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      u8 <a class="code" href="protocol_8h.html#a4d43e8212bdc9dbee866506f04effcea">cmd</a> = Data;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <span class="keywordflow">switch</span> (cmd){</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="protocol_8h.html#acae4d29f913672998e3ab8e492f4a79f">RQ_GET_TELEMETRY_DATA</a>:</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <span class="keywordflow">case</span>    <a class="code" href="protocol_8h.html#a943f0d520690e0b93b6732755a4febbd">RQ_AUTOSEND_DATA</a>:</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <span class="keywordflow">case</span>    <a class="code" href="protocol_8h.html#a1279b46ca7f6eb738d8756769af74b88">RQ_GET_LOG_DATA</a> :</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <span class="keywordflow">case</span>    <a class="code" href="protocol_8h.html#a06ba63b5c8356696a494efb5d1f704b0">RQ_GET_UID</a>:</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <span class="keywordflow">case</span>    <a class="code" href="protocol_8h.html#af86fa527ce8e6d6ae7c9eb62c0e14f2b">RQ_RESET_DEVICE</a>:</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <span class="keywordflow">case</span>    <a class="code" href="protocol_8h.html#a2f88c523bb5f4320fc147700ef55e09a">RQ_READ_DBGI</a>: </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="keywordflow">case</span>    <a class="code" href="protocol_8h.html#ab93567ea63b592b8a3a29247d4942594">RQ_READ_SN</a> :       </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <span class="keywordflow">case</span>    <a class="code" href="protocol_8h.html#a3d3e0b6be8797f45aefe0a4c84336cb8">READ_SETTINGS_RQ</a>:</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <span class="keywordflow">case</span>    <a class="code" href="protocol_8h.html#a53f7d8bae49b7a369b58e626a0c5c02b">RQ_READ_OPT_BYTE</a> :</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a151bb1071a12318545a6fca8b18770eb">tail</a> =4; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">break</span>; </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <span class="keywordflow">case</span>  <a class="code" href="protocol_8h.html#a252ded1dd3e2f89d0639225ca83c2898">RQ_CTRL_AUTOTUNE</a>:</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a151bb1071a12318545a6fca8b18770eb">tail</a> =6; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <span class="keywordflow">case</span>  <a class="code" href="protocol_8h.html#ae560571bdaac2871fe4537177cee3c34">RQ_WRITE_PAGE_DATA</a>:</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a151bb1071a12318545a6fca8b18770eb">tail</a> =69; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="keywordflow">case</span>  <a class="code" href="protocol_8h.html#a58fcfd827704ba9822ba830744aed9e9">RQ_READ_PAGE_DATA</a>: </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      <span class="keywordflow">case</span>  <a class="code" href="protocol_8h.html#ad14575637b0dfcc8c2d024661b82b649">RQ_SET_FILTER_LENGTH</a> : </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="keywordflow">case</span>  <a class="code" href="protocol_8h.html#a061cc437b17478e7926048c5cb28804a">RQ_SET_AUTOSEND_TIME</a>:</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <span class="keywordflow">case</span>  <a class="code" href="protocol_8h.html#a3454be907777bebfed7d6eaa7e7f7c4c">RQ_SET_AUTOSEND_MODE</a> :</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a151bb1071a12318545a6fca8b18770eb">tail</a> =5; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <span class="keywordflow">case</span>  <a class="code" href="protocol_8h.html#ad0f717b1ffb078999c44c3dfaf5ab9d6">RQ_WRITE_SN</a>  :</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a151bb1071a12318545a6fca8b18770eb">tail</a> =13; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <span class="keywordflow">default</span>: </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <a class="code" href="group__uarts.html#gaa7c53fd22f1fd7d50ec835f785e9123b">resetRx</a>(p_uart_hndl);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  } </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  pTmpDataRx-&gt;<a class="code" href="struct_cash_buff_rx.html#ab5b7d59224b89ac190735c1f59ac2335">buffer</a>[pTmpDataRx-&gt;<a class="code" href="struct_cash_buff_rx.html#af9ffaf00f288857651b3b5fd57337ca4">data_cnt</a>] = Data;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  pTmpDataRx-&gt;<a class="code" href="struct_cash_buff_rx.html#af9ffaf00f288857651b3b5fd57337ca4">data_cnt</a>++;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a03264ffced2f2f9ac2231d4dcb991750">TimeOut</a> = 100;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  </div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="keywordflow">if</span>((p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a151bb1071a12318545a6fca8b18770eb">tail</a>)&amp;&amp;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;     (pTmpDataRx-&gt;<a class="code" href="struct_cash_buff_rx.html#af9ffaf00f288857651b3b5fd57337ca4">data_cnt</a> &gt;= p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a151bb1071a12318545a6fca8b18770eb">tail</a>)){ </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;       pTmpDataRx-&gt;<a class="code" href="struct_cash_buff_rx.html#af32b1fbe3899533624165d9917457e46">flg_has_data</a> =1;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;       <span class="keywordflow">if</span>(++p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a77cb6c587fae3afb40c4f801cc2b8903">indexCash</a> &gt;=<a class="code" href="group__uarts.html#ga5c6e235e024a5a41e8c586a580891853">CASH_LEVEL</a>)</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;         p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a77cb6c587fae3afb40c4f801cc2b8903">indexCash</a> = 0;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a4b2102021a91bfb2b730d93f4e521aa8">pCurrDataRx</a> = &amp;p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a0f4e3feeece2d07c67431b0702eb6c54">CshBuf</a>[p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a77cb6c587fae3afb40c4f801cc2b8903">indexCash</a>];</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a4b2102021a91bfb2b730d93f4e521aa8">pCurrDataRx</a>-&gt;<a class="code" href="struct_cash_buff_rx.html#af9ffaf00f288857651b3b5fd57337ca4">data_cnt</a> =0;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a4b2102021a91bfb2b730d93f4e521aa8">pCurrDataRx</a>-&gt;<a class="code" href="struct_cash_buff_rx.html#af32b1fbe3899533624165d9917457e46">flg_has_data</a> =0;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a4b2102021a91bfb2b730d93f4e521aa8">pCurrDataRx</a>-&gt;<a class="code" href="struct_cash_buff_rx.html#affbdbbc5f703ff3aefdb94877c3c9d19">head</a> = 0;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;       p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">rx</a>.<a class="code" href="structuart__data___r_x__t.html#a03264ffced2f2f9ac2231d4dcb991750">TimeOut</a> = 0;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;       <span class="keywordflow">if</span>(name == <a class="code" href="group__uarts.html#ggade254df27f4cf8ba2f9ae87df2e5ecf3a5f3c300be3cf695e81290fbc18088d17">RS485</a>)</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;         <a class="code" href="group__uarts.html#ga054ecf21b70441570744dca4207d6c75">STATE_485</a> = <a class="code" href="group__uarts.html#gga2f1f0703b03cfbadaded76da0cfe69ecaf120996068493db5680d0b44f9229807">ON_RX</a>; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;     }   </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  </div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;}</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div>
<div class="line"><a name="l00360"></a><span class="lineno"><a class="line" href="group__irq__uarts.html#ga7139cd4baabbbcbab0c1fe6d7d4ae1cc">  360</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__irq__uarts.html#ga7139cd4baabbbcbab0c1fe6d7d4ae1cc">USART1_IRQHandler</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <a class="code" href="structuart__handler__t.html">uart_handler_t</a> *p_uart_hndl = uart[<a class="code" href="group__uarts.html#ggade254df27f4cf8ba2f9ae87df2e5ecf3a5f3c300be3cf695e81290fbc18088d17">RS485</a>]; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    usart_type* pUart = p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a>; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="keywordflow">if</span>((usart_flag_get(USART1, USART_RDBF_FLAG) != RESET) &amp;&amp;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    (USART1-&gt;ctrl1_bit.rdbfien )) {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    u8 d = (USART1-&gt;dt) &amp; 0xFF;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <a class="code" href="group__irq__uarts.html#ga4fd84fb4151684cda8f85fdedd50320f">UART_RxCpltCallback</a>(<a class="code" href="group__uarts.html#ggade254df27f4cf8ba2f9ae87df2e5ecf3a5f3c300be3cf695e81290fbc18088d17">RS485</a> , d);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  }</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="comment">// * * * * * * * * * * * * *</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="keywordflow">if</span>((usart_flag_get(USART1, USART_TDBE_FLAG) != RESET) &amp;&amp;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    (USART1-&gt;ctrl1_bit.tdbeien)) {  </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">if</span>(p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a452c0fe767bc8a46fa89a9c6168d03e8">tx</a>.<a class="code" href="structuart__data___t_x__t.html#a4bd87c601c9b6f4bd17294107b9e9e92">data_cnt</a> == 0){ </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      pUart-&gt;ctrl1_bit.tdbeien = 0;  </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      pUart-&gt;ctrl1_bit.tdcien = 1; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      <span class="keywordflow">return</span>; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    }</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    pUart-&gt;dt = (*p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a452c0fe767bc8a46fa89a9c6168d03e8">tx</a>.<a class="code" href="structuart__data___t_x__t.html#a8c31dcd6c82b68ca4fc4ab67638419fe">pData</a>) &amp; 0x00FF; </div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a452c0fe767bc8a46fa89a9c6168d03e8">tx</a>.<a class="code" href="structuart__data___t_x__t.html#a8c31dcd6c82b68ca4fc4ab67638419fe">pData</a> ++;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a452c0fe767bc8a46fa89a9c6168d03e8">tx</a>.<a class="code" href="structuart__data___t_x__t.html#a4bd87c601c9b6f4bd17294107b9e9e92">data_cnt</a> --;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="comment">// * * * * * * * * * * * * *</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="keywordflow">if</span>((usart_flag_get(USART1,USART_TDC_FLAG) != RESET)&amp;&amp;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    (USART1-&gt;ctrl1_bit.tdcien))  { </div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    USART1-&gt;ctrl1_bit.tdcien = 0;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    USART1-&gt;ctrl1_bit.rdbfien = 1;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="comment">//    USART1-&gt;sts = ~(USART_TDC_FLAG); </span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;   p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a452c0fe767bc8a46fa89a9c6168d03e8">tx</a>.<a class="code" href="structuart__data___t_x__t.html#a8c89910f8c27c0ee419808b289107f59">flg_has_data</a>  = 0;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;   <a class="code" href="group__uarts.html#gaa7c53fd22f1fd7d50ec835f785e9123b">resetRx</a>(p_uart_hndl);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <a class="code" href="group__uarts.html#ga56081bd094ee795afae14c2994c0d19a">Switch_485_Rx</a>();</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;   USART1-&gt;sts = ~(USART_CTSCF_FLAG|  USART_BFF_FLAG |</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;     USART_TDC_FLAG | USART_RDBF_FLAG| USART_TDBE_FLAG);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;}</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="preprocessor">#ifndef Digit_CAN </span></div>
<div class="line"><a name="l00400"></a><span class="lineno"><a class="line" href="group__irq__uarts.html#ga0ca6fd0e6f77921dd1123539857ba0a8">  400</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__irq__uarts.html#ga0ca6fd0e6f77921dd1123539857ba0a8">USART2_IRQHandler</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <a class="code" href="structuart__handler__t.html">uart_handler_t</a> *p_uart_hndl = uart[ <a class="code" href="group__uarts.html#ggade254df27f4cf8ba2f9ae87df2e5ecf3a17ec828a427341ae4267c3c827ca4104">RS232</a>]; </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    usart_type* pUart = p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">Instance</a>; </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">//  if(usart_flag_get(USART2, USART_RDBF_FLAG) != RESET) {</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">if</span>((usart_flag_get(USART2, USART_RDBF_FLAG) != RESET) &amp;&amp;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    (USART2-&gt;ctrl1_bit.rdbfien )) {  </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    u8 d = (USART2-&gt;dt) &amp; 0xFF;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <a class="code" href="group__irq__uarts.html#ga4fd84fb4151684cda8f85fdedd50320f">UART_RxCpltCallback</a>(<a class="code" href="group__uarts.html#ggade254df27f4cf8ba2f9ae87df2e5ecf3a17ec828a427341ae4267c3c827ca4104">RS232</a>, d); </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">//  p_uart_hndl-&gt;rx.buffer[p_uart_hndl-&gt;rx.head] = d; // p_uart-&gt;rx.data_reg;</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">//  p_uart_hndl-&gt;rx.head = ((p_uart_hndl-&gt;rx.head + 1) == UART_RX_BUF_MSK) ? 0 : (p_uart_hndl -&gt;rx.head + 1);</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="keywordflow">if</span>((usart_flag_get(USART2, USART_TDBE_FLAG) != RESET) &amp;&amp;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    (USART2-&gt;ctrl1_bit.tdbeien)) {  </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    </div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">if</span>(p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a452c0fe767bc8a46fa89a9c6168d03e8">tx</a>.<a class="code" href="structuart__data___t_x__t.html#a4bd87c601c9b6f4bd17294107b9e9e92">data_cnt</a> == 0){ </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      pUart-&gt;ctrl1_bit.tdbeien = 0;  </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      pUart-&gt;ctrl1_bit.tdcien = 1; </div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      <span class="keywordflow">return</span>; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    pUart-&gt;dt = (*p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a452c0fe767bc8a46fa89a9c6168d03e8">tx</a>.<a class="code" href="structuart__data___t_x__t.html#a8c31dcd6c82b68ca4fc4ab67638419fe">pData</a>) &amp; 0x00FF; </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a452c0fe767bc8a46fa89a9c6168d03e8">tx</a>.<a class="code" href="structuart__data___t_x__t.html#a8c31dcd6c82b68ca4fc4ab67638419fe">pData</a> ++;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a452c0fe767bc8a46fa89a9c6168d03e8">tx</a>.<a class="code" href="structuart__data___t_x__t.html#a4bd87c601c9b6f4bd17294107b9e9e92">data_cnt</a> --;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="comment">// * * * * * * * * * * * * *</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="keywordflow">if</span>((usart_flag_get(USART2,USART_TDC_FLAG) != RESET)&amp;&amp;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    (USART2-&gt;ctrl1_bit.tdcien))  { </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    USART2-&gt;ctrl1_bit.tdcien = 0;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    USART2-&gt;ctrl1_bit.rdbfien = 1;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="comment">//    USART1-&gt;sts = ~(USART_TDC_FLAG); </span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;   p_uart_hndl-&gt;<a class="code" href="structuart__handler__t.html#a452c0fe767bc8a46fa89a9c6168d03e8">tx</a>.<a class="code" href="structuart__data___t_x__t.html#a8c89910f8c27c0ee419808b289107f59">flg_has_data</a>  = 0;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;   <a class="code" href="group__uarts.html#gaa7c53fd22f1fd7d50ec835f785e9123b">resetRx</a>(p_uart_hndl);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;     </div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  }</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;   </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  </div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;   USART2-&gt;sts = ~(USART_CTSCF_FLAG|  USART_BFF_FLAG |</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;     USART_TDC_FLAG | USART_RDBF_FLAG| USART_TDBE_FLAG);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;}</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="preprocessor">#endif  </span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">/* *********END OF FILE****/</span></div>
<div class="ttc" id="protocol_8h_html_ad14575637b0dfcc8c2d024661b82b649"><div class="ttname"><a href="protocol_8h.html#ad14575637b0dfcc8c2d024661b82b649">RQ_SET_FILTER_LENGTH</a></div><div class="ttdeci">#define RQ_SET_FILTER_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="protocol_8h_source.html#l00015">protocol.h:15</a></div></div>
<div class="ttc" id="structuart__handler__t_html_aa91b3d0ee1ced1fb2f5ef7686a4b87b7"><div class="ttname"><a href="structuart__handler__t.html#aa91b3d0ee1ced1fb2f5ef7686a4b87b7">uart_handler_t::Instance</a></div><div class="ttdeci">usart_type * Instance</div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00093">usart.h:93</a></div></div>
<div class="ttc" id="group__uarts_html_ga94efa9200251a84749aaeb3a94817315"><div class="ttname"><a href="group__uarts.html#ga94efa9200251a84749aaeb3a94817315">WD_TimeOut_Cb</a></div><div class="ttdeci">void WD_TimeOut_Cb(uart_name_t name)</div><div class="ttdef"><b>Definition:</b> <a href="usart_8c_source.html#l00210">usart.c:210</a></div></div>
<div class="ttc" id="main_8h_html_a5b56665f8b448f779a1d9cd8e9f7d671"><div class="ttname"><a href="main_8h.html#a5b56665f8b448f779a1d9cd8e9f7d671">RS485_RE_GPIO_Port</a></div><div class="ttdeci">#define RS485_RE_GPIO_Port</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00168">main.h:168</a></div></div>
<div class="ttc" id="main_8h_html_af59e10713e28d2925436043c35cecd6e"><div class="ttname"><a href="main_8h.html#af59e10713e28d2925436043c35cecd6e">RS485_DE_Pin</a></div><div class="ttdeci">#define RS485_DE_Pin</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00169">main.h:169</a></div></div>
<div class="ttc" id="group__uarts_html_gae958bf8691e7124918817c509b0b4b69"><div class="ttname"><a href="group__uarts.html#gae958bf8691e7124918817c509b0b4b69">uart</a></div><div class="ttdeci">static uart_handler_t * uart[QNT_OF_UART]</div><div class="ttdef"><b>Definition:</b> <a href="usart_8c_source.html#l00035">usart.c:35</a></div></div>
<div class="ttc" id="group__uarts_html_gaa0153ed01e45dc62e9fdb0e4017ea6ab"><div class="ttname"><a href="group__uarts.html#gaa0153ed01e45dc62e9fdb0e4017ea6ab">BAUDRATE_MIN</a></div><div class="ttdeci">#define BAUDRATE_MIN</div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00045">usart.h:45</a></div></div>
<div class="ttc" id="main_8h_html_ab635ac383d4e81692e018fb73febf5f1"><div class="ttname"><a href="main_8h.html#ab635ac383d4e81692e018fb73febf5f1">RS485_TX_Pin</a></div><div class="ttdeci">#define RS485_TX_Pin</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00174">main.h:174</a></div></div>
<div class="ttc" id="group__uarts_html_ggade254df27f4cf8ba2f9ae87df2e5ecf3ae709f06e2ed680349975d262dfe93a6a"><div class="ttname"><a href="group__uarts.html#ggade254df27f4cf8ba2f9ae87df2e5ecf3ae709f06e2ed680349975d262dfe93a6a">QNT_OF_UART</a></div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00021">usart.h:21</a></div></div>
<div class="ttc" id="structuart__data___r_x__t_html_a4b2102021a91bfb2b730d93f4e521aa8"><div class="ttname"><a href="structuart__data___r_x__t.html#a4b2102021a91bfb2b730d93f4e521aa8">uart_data_RX_t::pCurrDataRx</a></div><div class="ttdeci">CashBuffRx * pCurrDataRx</div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00065">usart.h:65</a></div></div>
<div class="ttc" id="struct_cash_buff_rx_html_af32b1fbe3899533624165d9917457e46"><div class="ttname"><a href="struct_cash_buff_rx.html#af32b1fbe3899533624165d9917457e46">CashBuffRx::flg_has_data</a></div><div class="ttdeci">uint8_t flg_has_data</div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00057">usart.h:57</a></div></div>
<div class="ttc" id="main_8h_html_aed428bd39090205f89119c3dcfb20f26"><div class="ttname"><a href="main_8h.html#aed428bd39090205f89119c3dcfb20f26">RS485_DE_GPIO_Port</a></div><div class="ttdeci">#define RS485_DE_GPIO_Port</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00170">main.h:170</a></div></div>
<div class="ttc" id="structuart__handler__t_html_a1d25116962a7e72cec3e3725fc1aa3fb"><div class="ttname"><a href="structuart__handler__t.html#a1d25116962a7e72cec3e3725fc1aa3fb">uart_handler_t::DATA_LEN</a></div><div class="ttdeci">usart_data_bit_num_type DATA_LEN</div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00097">usart.h:97</a></div></div>
<div class="ttc" id="protocol_8h_html_a6764d9864b9d0e3c5d0f7e71f14495c1"><div class="ttname"><a href="protocol_8h.html#a6764d9864b9d0e3c5d0f7e71f14495c1">getDevAdr</a></div><div class="ttdeci">u8 getDevAdr()</div><div class="ttdef"><b>Definition:</b> <a href="protocol_8c_source.html#l00047">protocol.c:47</a></div></div>
<div class="ttc" id="protocol_8h_html_a3454be907777bebfed7d6eaa7e7f7c4c"><div class="ttname"><a href="protocol_8h.html#a3454be907777bebfed7d6eaa7e7f7c4c">RQ_SET_AUTOSEND_MODE</a></div><div class="ttdeci">#define RQ_SET_AUTOSEND_MODE</div><div class="ttdef"><b>Definition:</b> <a href="protocol_8h_source.html#l00021">protocol.h:21</a></div></div>
<div class="ttc" id="main_8h_html_a3244f8f343a755a3d384a7b1aa493b7a"><div class="ttname"><a href="main_8h.html#a3244f8f343a755a3d384a7b1aa493b7a">RS232_RX_GPIO_Port</a></div><div class="ttdeci">#define RS232_RX_GPIO_Port</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00088">main.h:88</a></div></div>
<div class="ttc" id="group__uarts_html_ga086619e845227dc6717d4b4b482e918b"><div class="ttname"><a href="group__uarts.html#ga086619e845227dc6717d4b4b482e918b">UART_MspDeInit</a></div><div class="ttdeci">void UART_MspDeInit(uart_handler_t *uartHandle)</div><div class="ttdef"><b>Definition:</b> <a href="usart_8c_source.html#l00167">usart.c:167</a></div></div>
<div class="ttc" id="group__uarts_html_ga6e176fd1d8375a74a4f90304d872511f"><div class="ttname"><a href="group__uarts.html#ga6e176fd1d8375a74a4f90304d872511f">BAUDRATE_MAX</a></div><div class="ttdeci">#define BAUDRATE_MAX</div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00046">usart.h:46</a></div></div>
<div class="ttc" id="structuart__data___t_x__t_html_a0b56dc3690dda140f83c3d702c0a41d8"><div class="ttname"><a href="structuart__data___t_x__t.html#a0b56dc3690dda140f83c3d702c0a41d8">uart_data_TX_t::buffer</a></div><div class="ttdeci">uint8_t buffer[UART_DATA_BUF_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00073">usart.h:73</a></div></div>
<div class="ttc" id="group__uarts_html_gad2eaec0611d51858a3967868119b3fc5"><div class="ttname"><a href="group__uarts.html#gad2eaec0611d51858a3967868119b3fc5">usart_tx_data</a></div><div class="ttdeci">void usart_tx_data(uart_name_t name, uint8_t *p_data, uint8_t len)</div><div class="ttdef"><b>Definition:</b> <a href="usart_8c_source.html#l00248">usart.c:248</a></div></div>
<div class="ttc" id="group__uarts_html_gae2ba0ad082f30d5ed13df707e8a6071a"><div class="ttname"><a href="group__uarts.html#gae2ba0ad082f30d5ed13df707e8a6071a">en_baudrate_t</a></div><div class="ttdeci">en_baudrate_t</div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00029">usart.h:29</a></div></div>
<div class="ttc" id="main_8h_html_a1a3c0c7e393b80364cad917a8f72c5df"><div class="ttname"><a href="main_8h.html#a1a3c0c7e393b80364cad917a8f72c5df">CRM_GPIO_RS232_RX_PERIPH_CLOCK</a></div><div class="ttdeci">#define CRM_GPIO_RS232_RX_PERIPH_CLOCK</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00089">main.h:89</a></div></div>
<div class="ttc" id="group__uarts_html_gafa0dca0f43e1383fbb21c32811b91266"><div class="ttname"><a href="group__uarts.html#gafa0dca0f43e1383fbb21c32811b91266">huart1</a></div><div class="ttdeci">uart_handler_t huart1</div><div class="ttdef"><b>Definition:</b> <a href="usart_8c_source.html#l00011">usart.c:11</a></div></div>
<div class="ttc" id="error_8h_html_af71150c123488664ae92c6759b48af4d"><div class="ttname"><a href="error_8h.html#af71150c123488664ae92c6759b48af4d">ERROR_OK</a></div><div class="ttdeci">#define ERROR_OK</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00016">error.h:16</a></div></div>
<div class="ttc" id="group__uarts_html_gaa7c53fd22f1fd7d50ec835f785e9123b"><div class="ttname"><a href="group__uarts.html#gaa7c53fd22f1fd7d50ec835f785e9123b">resetRx</a></div><div class="ttdeci">static void resetRx(uart_handler_t *p_uart_hndl)</div><div class="ttdef"><b>Definition:</b> <a href="usart_8c_source.html#l00198">usart.c:198</a></div></div>
<div class="ttc" id="structuart__data___r_x__t_html_a151bb1071a12318545a6fca8b18770eb"><div class="ttname"><a href="structuart__data___r_x__t.html#a151bb1071a12318545a6fca8b18770eb">uart_data_RX_t::tail</a></div><div class="ttdeci">uint8_t tail</div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00066">usart.h:66</a></div></div>
<div class="ttc" id="group__uarts_html_ggade254df27f4cf8ba2f9ae87df2e5ecf3a17ec828a427341ae4267c3c827ca4104"><div class="ttname"><a href="group__uarts.html#ggade254df27f4cf8ba2f9ae87df2e5ecf3a17ec828a427341ae4267c3c827ca4104">RS232</a></div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00018">usart.h:18</a></div></div>
<div class="ttc" id="group__irq__uarts_html_ga7139cd4baabbbcbab0c1fe6d7d4ae1cc"><div class="ttname"><a href="group__irq__uarts.html#ga7139cd4baabbbcbab0c1fe6d7d4ae1cc">USART1_IRQHandler</a></div><div class="ttdeci">void USART1_IRQHandler(void)</div><div class="ttdef"><b>Definition:</b> <a href="usart_8c_source.html#l00360">usart.c:360</a></div></div>
<div class="ttc" id="protocol_8h_html_ae560571bdaac2871fe4537177cee3c34"><div class="ttname"><a href="protocol_8h.html#ae560571bdaac2871fe4537177cee3c34">RQ_WRITE_PAGE_DATA</a></div><div class="ttdeci">#define RQ_WRITE_PAGE_DATA</div><div class="ttdef"><b>Definition:</b> <a href="protocol_8h_source.html#l00025">protocol.h:25</a></div></div>
<div class="ttc" id="main_8h_html_a934296ef07692dfdd5be4ff9abbe0a4e"><div class="ttname"><a href="main_8h.html#a934296ef07692dfdd5be4ff9abbe0a4e">RS485_RX_GPIO_Port</a></div><div class="ttdeci">#define RS485_RX_GPIO_Port</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00179">main.h:179</a></div></div>
<div class="ttc" id="group__uarts_html_ga054ecf21b70441570744dca4207d6c75"><div class="ttname"><a href="group__uarts.html#ga054ecf21b70441570744dca4207d6c75">STATE_485</a></div><div class="ttdeci">static e_State485 STATE_485</div><div class="ttdef"><b>Definition:</b> <a href="usart_8c_source.html#l00031">usart.c:31</a></div></div>
<div class="ttc" id="struct_cash_buff_rx_html_affbdbbc5f703ff3aefdb94877c3c9d19"><div class="ttname"><a href="struct_cash_buff_rx.html#affbdbbc5f703ff3aefdb94877c3c9d19">CashBuffRx::head</a></div><div class="ttdeci">uint8_t head</div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00059">usart.h:59</a></div></div>
<div class="ttc" id="main_8h_html_a52156f353d041e6ea7d8a0ba9afb4ddd"><div class="ttname"><a href="main_8h.html#a52156f353d041e6ea7d8a0ba9afb4ddd">RS232_TX_GPIO_Port</a></div><div class="ttdeci">#define RS232_TX_GPIO_Port</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00084">main.h:84</a></div></div>
<div class="ttc" id="protocol_8h_html_a943f0d520690e0b93b6732755a4febbd"><div class="ttname"><a href="protocol_8h.html#a943f0d520690e0b93b6732755a4febbd">RQ_AUTOSEND_DATA</a></div><div class="ttdeci">#define RQ_AUTOSEND_DATA</div><div class="ttdef"><b>Definition:</b> <a href="protocol_8h_source.html#l00014">protocol.h:14</a></div></div>
<div class="ttc" id="group__uarts_html_gga2f1f0703b03cfbadaded76da0cfe69ecad235dacec3a2352d37b5d9602defa9f1"><div class="ttname"><a href="group__uarts.html#gga2f1f0703b03cfbadaded76da0cfe69ecad235dacec3a2352d37b5d9602defa9f1">ON_TX</a></div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00025">usart.h:25</a></div></div>
<div class="ttc" id="protocol_8h_html_acae4d29f913672998e3ab8e492f4a79f"><div class="ttname"><a href="protocol_8h.html#acae4d29f913672998e3ab8e492f4a79f">RQ_GET_TELEMETRY_DATA</a></div><div class="ttdeci">#define RQ_GET_TELEMETRY_DATA</div><div class="ttdef"><b>Definition:</b> <a href="protocol_8h_source.html#l00013">protocol.h:13</a></div></div>
<div class="ttc" id="main_8h_html_ab3c90e4e898e9909bc769fa16ef5da60"><div class="ttname"><a href="main_8h.html#ab3c90e4e898e9909bc769fa16ef5da60">CRM_GPIO_RS485_TX_PERIPH_CLOCK</a></div><div class="ttdeci">#define CRM_GPIO_RS485_TX_PERIPH_CLOCK</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00176">main.h:176</a></div></div>
<div class="ttc" id="protocol_8h_html_af86fa527ce8e6d6ae7c9eb62c0e14f2b"><div class="ttname"><a href="protocol_8h.html#af86fa527ce8e6d6ae7c9eb62c0e14f2b">RQ_RESET_DEVICE</a></div><div class="ttdeci">#define RQ_RESET_DEVICE</div><div class="ttdef"><b>Definition:</b> <a href="protocol_8h_source.html#l00029">protocol.h:29</a></div></div>
<div class="ttc" id="group__uarts_html_ga57d1167735baafab8e3288526c424929"><div class="ttname"><a href="group__uarts.html#ga57d1167735baafab8e3288526c424929">MX_USART1_UART_Init</a></div><div class="ttdeci">void MX_USART1_UART_Init(void)</div><div class="ttdoc">USART1 init function. </div><div class="ttdef"><b>Definition:</b> <a href="usart_8c_source.html#l00076">usart.c:76</a></div></div>
<div class="ttc" id="group__irq__uarts_html_ga0ca6fd0e6f77921dd1123539857ba0a8"><div class="ttname"><a href="group__irq__uarts.html#ga0ca6fd0e6f77921dd1123539857ba0a8">USART2_IRQHandler</a></div><div class="ttdeci">void USART2_IRQHandler(void)</div><div class="ttdef"><b>Definition:</b> <a href="usart_8c_source.html#l00400">usart.c:400</a></div></div>
<div class="ttc" id="main_8h_html"><div class="ttname"><a href="main_8h.html">main.h</a></div></div>
<div class="ttc" id="group__uarts_html_ga56081bd094ee795afae14c2994c0d19a"><div class="ttname"><a href="group__uarts.html#ga56081bd094ee795afae14c2994c0d19a">Switch_485_Rx</a></div><div class="ttdeci">void Switch_485_Rx()</div><div class="ttdef"><b>Definition:</b> <a href="usart_8c_source.html#l00240">usart.c:240</a></div></div>
<div class="ttc" id="structuart__data___r_x__t_html_a0f4e3feeece2d07c67431b0702eb6c54"><div class="ttname"><a href="structuart__data___r_x__t.html#a0f4e3feeece2d07c67431b0702eb6c54">uart_data_RX_t::CshBuf</a></div><div class="ttdeci">CashBuffRx CshBuf[CASH_LEVEL]</div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00064">usart.h:64</a></div></div>
<div class="ttc" id="protocol_8h_html_a1279b46ca7f6eb738d8756769af74b88"><div class="ttname"><a href="protocol_8h.html#a1279b46ca7f6eb738d8756769af74b88">RQ_GET_LOG_DATA</a></div><div class="ttdeci">#define RQ_GET_LOG_DATA</div><div class="ttdef"><b>Definition:</b> <a href="protocol_8h_source.html#l00016">protocol.h:16</a></div></div>
<div class="ttc" id="structuart__data___t_x__t_html_a4bd87c601c9b6f4bd17294107b9e9e92"><div class="ttname"><a href="structuart__data___t_x__t.html#a4bd87c601c9b6f4bd17294107b9e9e92">uart_data_TX_t::data_cnt</a></div><div class="ttdeci">uint8_t data_cnt</div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00075">usart.h:75</a></div></div>
<div class="ttc" id="main_8h_html_a942a7f576d7a6eb12e336c6c5d94826b"><div class="ttname"><a href="main_8h.html#a942a7f576d7a6eb12e336c6c5d94826b">RS485_TX_GPIO_Port</a></div><div class="ttdeci">#define RS485_TX_GPIO_Port</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00175">main.h:175</a></div></div>
<div class="ttc" id="protocol_8h_html_adccb52e083d60cde3230b7075a073bd3"><div class="ttname"><a href="protocol_8h.html#adccb52e083d60cde3230b7075a073bd3">MB_FUNCTION_READ_HOLDING_REGISTERS</a></div><div class="ttdeci">#define MB_FUNCTION_READ_HOLDING_REGISTERS</div><div class="ttdef"><b>Definition:</b> <a href="protocol_8h_source.html#l00054">protocol.h:54</a></div></div>
<div class="ttc" id="group__uarts_html_gga2f1f0703b03cfbadaded76da0cfe69ecaf120996068493db5680d0b44f9229807"><div class="ttname"><a href="group__uarts.html#gga2f1f0703b03cfbadaded76da0cfe69ecaf120996068493db5680d0b44f9229807">ON_RX</a></div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00025">usart.h:25</a></div></div>
<div class="ttc" id="structuart__data___t_x__t_html_a8c31dcd6c82b68ca4fc4ab67638419fe"><div class="ttname"><a href="structuart__data___t_x__t.html#a8c31dcd6c82b68ca4fc4ab67638419fe">uart_data_TX_t::pData</a></div><div class="ttdeci">uint8_t * pData</div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00074">usart.h:74</a></div></div>
<div class="ttc" id="structuart__handler__t_html_a7187f3172c6bdfdd6c9912f06e7b9eac"><div class="ttname"><a href="structuart__handler__t.html#a7187f3172c6bdfdd6c9912f06e7b9eac">uart_handler_t::PARITY</a></div><div class="ttdeci">usart_parity_selection_type PARITY</div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00098">usart.h:98</a></div></div>
<div class="ttc" id="structuart__data___r_x__t_html_a77cb6c587fae3afb40c4f801cc2b8903"><div class="ttname"><a href="structuart__data___r_x__t.html#a77cb6c587fae3afb40c4f801cc2b8903">uart_data_RX_t::indexCash</a></div><div class="ttdeci">u8 indexCash</div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00063">usart.h:63</a></div></div>
<div class="ttc" id="structuart__handler__t_html_a4b36054905afc89fbd72b55be144bc9e"><div class="ttname"><a href="structuart__handler__t.html#a4b36054905afc89fbd72b55be144bc9e">uart_handler_t::BaudRate</a></div><div class="ttdeci">u32 BaudRate</div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00094">usart.h:94</a></div></div>
<div class="ttc" id="struct_cash_buff_rx_html"><div class="ttname"><a href="struct_cash_buff_rx.html">CashBuffRx</a></div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00055">usart.h:55</a></div></div>
<div class="ttc" id="protocol_8h_html_af4e69e53bfec6093eea1373944323cd3"><div class="ttname"><a href="protocol_8h.html#af4e69e53bfec6093eea1373944323cd3">PREFIX_INCOMING</a></div><div class="ttdeci">#define PREFIX_INCOMING</div><div class="ttdef"><b>Definition:</b> <a href="protocol_8h_source.html#l00007">protocol.h:7</a></div></div>
<div class="ttc" id="group__uarts_html_gga2f1f0703b03cfbadaded76da0cfe69ecabe602b24239fa21262ee8617dc9417b1"><div class="ttname"><a href="group__uarts.html#gga2f1f0703b03cfbadaded76da0cfe69ecabe602b24239fa21262ee8617dc9417b1">ON_BUSY_RX</a></div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00025">usart.h:25</a></div></div>
<div class="ttc" id="structuart__handler__t_html_a01d40c4b3b21909fa609d84bb2e36813"><div class="ttname"><a href="structuart__handler__t.html#a01d40c4b3b21909fa609d84bb2e36813">uart_handler_t::rx</a></div><div class="ttdeci">uart_data_RX_t rx</div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00095">usart.h:95</a></div></div>
<div class="ttc" id="error_8h_html_a11e1c0af99e0270609a63a86b45e5ea5"><div class="ttname"><a href="error_8h.html#a11e1c0af99e0270609a63a86b45e5ea5">ERROR_NO_DATA</a></div><div class="ttdeci">#define ERROR_NO_DATA</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00017">error.h:17</a></div></div>
<div class="ttc" id="group__uarts_html_gaae9ceac4895201be76ecae85c60ccff5"><div class="ttname"><a href="group__uarts.html#gaae9ceac4895201be76ecae85c60ccff5">huart2</a></div><div class="ttdeci">uart_handler_t huart2</div><div class="ttdef"><b>Definition:</b> <a href="usart_8c_source.html#l00014">usart.c:14</a></div></div>
<div class="ttc" id="protocol_8h_html_ad0f717b1ffb078999c44c3dfaf5ab9d6"><div class="ttname"><a href="protocol_8h.html#ad0f717b1ffb078999c44c3dfaf5ab9d6">RQ_WRITE_SN</a></div><div class="ttdeci">#define RQ_WRITE_SN</div><div class="ttdef"><b>Definition:</b> <a href="protocol_8h_source.html#l00020">protocol.h:20</a></div></div>
<div class="ttc" id="group__uarts_html_ggade254df27f4cf8ba2f9ae87df2e5ecf3a5f3c300be3cf695e81290fbc18088d17"><div class="ttname"><a href="group__uarts.html#ggade254df27f4cf8ba2f9ae87df2e5ecf3a5f3c300be3cf695e81290fbc18088d17">RS485</a></div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00020">usart.h:20</a></div></div>
<div class="ttc" id="group__uarts_html_gade254df27f4cf8ba2f9ae87df2e5ecf3"><div class="ttname"><a href="group__uarts.html#gade254df27f4cf8ba2f9ae87df2e5ecf3">uart_name_t</a></div><div class="ttdeci">uart_name_t</div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00015">usart.h:15</a></div></div>
<div class="ttc" id="group__uarts_html_ga3fae01b3cdbc182c3711fa316c0c982b"><div class="ttname"><a href="group__uarts.html#ga3fae01b3cdbc182c3711fa316c0c982b">typeInpPack</a></div><div class="ttdeci">typeInpPack</div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00082">usart.h:82</a></div></div>
<div class="ttc" id="group__uarts_html_ga7919e306d2ca3d2c2cda1b5b0c4dad1c"><div class="ttname"><a href="group__uarts.html#ga7919e306d2ca3d2c2cda1b5b0c4dad1c">usart_is_tx_busy</a></div><div class="ttdeci">int usart_is_tx_busy(uart_name_t name)</div><div class="ttdef"><b>Definition:</b> <a href="usart_8c_source.html#l00266">usart.c:266</a></div></div>
<div class="ttc" id="_d_s18_b20_cl_8cpp_html_a6b1e92c01ca22bfae2d718f5f9159936"><div class="ttname"><a href="_d_s18_b20_cl_8cpp.html#a6b1e92c01ca22bfae2d718f5f9159936">memcpy</a></div><div class="ttdeci">memcpy(Dev-&gt;OwnScPd.raw, OW_rx_data.byte, 9)</div></div>
<div class="ttc" id="group__irq__uarts_html_ga4fd84fb4151684cda8f85fdedd50320f"><div class="ttname"><a href="group__irq__uarts.html#ga4fd84fb4151684cda8f85fdedd50320f">UART_RxCpltCallback</a></div><div class="ttdeci">void UART_RxCpltCallback(uart_name_t name, u8 Data)</div><div class="ttdef"><b>Definition:</b> <a href="usart_8c_source.html#l00275">usart.c:275</a></div></div>
<div class="ttc" id="group__uarts_html_gae800228bb1a70c5b3536033e0aa6e133"><div class="ttname"><a href="group__uarts.html#gae800228bb1a70c5b3536033e0aa6e133">usart_ch_br</a></div><div class="ttdeci">void usart_ch_br(en_baudrate_t en_baudrate)</div><div class="ttdef"><b>Definition:</b> <a href="usart_8c_source.html#l00071">usart.c:71</a></div></div>
<div class="ttc" id="group__uarts_html_gab6e3a52c9a116ae73bd7df04419e0abb"><div class="ttname"><a href="group__uarts.html#gab6e3a52c9a116ae73bd7df04419e0abb">Switch_485_Tx</a></div><div class="ttdeci">void Switch_485_Tx()</div><div class="ttdef"><b>Definition:</b> <a href="usart_8c_source.html#l00244">usart.c:244</a></div></div>
<div class="ttc" id="protocol_8h_html_a77d5d17787037bbb21347a684a46d947"><div class="ttname"><a href="protocol_8h.html#a77d5d17787037bbb21347a684a46d947">name</a></div><div class="ttdeci">char name[SENSOR_NAME_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="protocol_8h_source.html#l00091">protocol.h:91</a></div></div>
<div class="ttc" id="structuart__data___r_x__t_html_a03264ffced2f2f9ac2231d4dcb991750"><div class="ttname"><a href="structuart__data___r_x__t.html#a03264ffced2f2f9ac2231d4dcb991750">uart_data_RX_t::TimeOut</a></div><div class="ttdeci">u8 TimeOut</div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00067">usart.h:67</a></div></div>
<div class="ttc" id="group__uarts_html_ga2f1f0703b03cfbadaded76da0cfe69ec"><div class="ttname"><a href="group__uarts.html#ga2f1f0703b03cfbadaded76da0cfe69ec">e_State485</a></div><div class="ttdeci">e_State485</div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00024">usart.h:24</a></div></div>
<div class="ttc" id="protocol_8h_html_a2f88c523bb5f4320fc147700ef55e09a"><div class="ttname"><a href="protocol_8h.html#a2f88c523bb5f4320fc147700ef55e09a">RQ_READ_DBGI</a></div><div class="ttdeci">#define RQ_READ_DBGI</div><div class="ttdef"><b>Definition:</b> <a href="protocol_8h_source.html#l00031">protocol.h:31</a></div></div>
<div class="ttc" id="main_8h_html_af5409007c74bc59e4fe850e2b65ef52d"><div class="ttname"><a href="main_8h.html#af5409007c74bc59e4fe850e2b65ef52d">CRM_GPIO_RS232_TX_PERIPH_CLOCK</a></div><div class="ttdeci">#define CRM_GPIO_RS232_TX_PERIPH_CLOCK</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00085">main.h:85</a></div></div>
<div class="ttc" id="main_8h_html_a08984c13e0171c5c7ee5a910bd265115"><div class="ttname"><a href="main_8h.html#a08984c13e0171c5c7ee5a910bd265115">RS485_RX_Pin</a></div><div class="ttdeci">#define RS485_RX_Pin</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00178">main.h:178</a></div></div>
<div class="ttc" id="structuart__handler__t_html_a6f9eb3887a6e12714a8dba4cdce2e407"><div class="ttname"><a href="structuart__handler__t.html#a6f9eb3887a6e12714a8dba4cdce2e407">uart_handler_t::STOP_BITS</a></div><div class="ttdeci">usart_stop_bit_num_type STOP_BITS</div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00099">usart.h:99</a></div></div>
<div class="ttc" id="protocol_8h_html_a061cc437b17478e7926048c5cb28804a"><div class="ttname"><a href="protocol_8h.html#a061cc437b17478e7926048c5cb28804a">RQ_SET_AUTOSEND_TIME</a></div><div class="ttdeci">#define RQ_SET_AUTOSEND_TIME</div><div class="ttdef"><b>Definition:</b> <a href="protocol_8h_source.html#l00018">protocol.h:18</a></div></div>
<div class="ttc" id="protocol_8h_html_a008292c215ba190bd1f3c2adac5f064e"><div class="ttname"><a href="protocol_8h.html#a008292c215ba190bd1f3c2adac5f064e">MB_FUNCTION_READ_INPUT_REGISTERS</a></div><div class="ttdeci">#define MB_FUNCTION_READ_INPUT_REGISTERS</div><div class="ttdef"><b>Definition:</b> <a href="protocol_8h_source.html#l00055">protocol.h:55</a></div></div>
<div class="ttc" id="structuart__handler__t_html_a452c0fe767bc8a46fa89a9c6168d03e8"><div class="ttname"><a href="structuart__handler__t.html#a452c0fe767bc8a46fa89a9c6168d03e8">uart_handler_t::tx</a></div><div class="ttdeci">uart_data_TX_t tx</div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00096">usart.h:96</a></div></div>
<div class="ttc" id="protocol_8h_html_a4d43e8212bdc9dbee866506f04effcea"><div class="ttname"><a href="protocol_8h.html#a4d43e8212bdc9dbee866506f04effcea">cmd</a></div><div class="ttdeci">uint8_t cmd</div><div class="ttdef"><b>Definition:</b> <a href="protocol_8h_source.html#l00072">protocol.h:72</a></div></div>
<div class="ttc" id="group__uarts_html_ga947cc171ff7ea8d25e707ce36a9c51b1"><div class="ttname"><a href="group__uarts.html#ga947cc171ff7ea8d25e707ce36a9c51b1">UART_Ini</a></div><div class="ttdeci">static void UART_Ini(uart_handler_t *p_huart)</div><div class="ttdef"><b>Definition:</b> <a href="usart_8c_source.html#l00038">usart.c:38</a></div></div>
<div class="ttc" id="protocol_8h_html_a06ba63b5c8356696a494efb5d1f704b0"><div class="ttname"><a href="protocol_8h.html#a06ba63b5c8356696a494efb5d1f704b0">RQ_GET_UID</a></div><div class="ttdeci">#define RQ_GET_UID</div><div class="ttdef"><b>Definition:</b> <a href="protocol_8h_source.html#l00027">protocol.h:27</a></div></div>
<div class="ttc" id="group__uarts_html_gaf0d5f32797a3c781219d8fdfdb831ae4"><div class="ttname"><a href="group__uarts.html#gaf0d5f32797a3c781219d8fdfdb831ae4">table_baudrate</a></div><div class="ttdeci">static const u32 table_baudrate[BAUDRATE_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="usart_8c_source.html#l00017">usart.c:17</a></div></div>
<div class="ttc" id="group__uarts_html_ga052088fe5bb3f807a4b2502e664fd4fd"><div class="ttname"><a href="group__uarts.html#ga052088fe5bb3f807a4b2502e664fd4fd">MX_USART2_UART_Init</a></div><div class="ttdeci">void MX_USART2_UART_Init(void)</div><div class="ttdoc">USART2 init function. </div><div class="ttdef"><b>Definition:</b> <a href="usart_8c_source.html#l00126">usart.c:126</a></div></div>
<div class="ttc" id="main_8h_html_a16b8ebec42963ed46bd2401878227663"><div class="ttname"><a href="main_8h.html#a16b8ebec42963ed46bd2401878227663">CRM_GPIO_RS485_RE_DE_PERIPH_CLOCK</a></div><div class="ttdeci">#define CRM_GPIO_RS485_RE_DE_PERIPH_CLOCK</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00171">main.h:171</a></div></div>
<div class="ttc" id="structuart__data___t_x__t_html_a8c89910f8c27c0ee419808b289107f59"><div class="ttname"><a href="structuart__data___t_x__t.html#a8c89910f8c27c0ee419808b289107f59">uart_data_TX_t::flg_has_data</a></div><div class="ttdeci">uint8_t flg_has_data</div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00076">usart.h:76</a></div></div>
<div class="ttc" id="protocol_8h_html_a252ded1dd3e2f89d0639225ca83c2898"><div class="ttname"><a href="protocol_8h.html#a252ded1dd3e2f89d0639225ca83c2898">RQ_CTRL_AUTOTUNE</a></div><div class="ttdeci">#define RQ_CTRL_AUTOTUNE</div><div class="ttdef"><b>Definition:</b> <a href="protocol_8h_source.html#l00032">protocol.h:32</a></div></div>
<div class="ttc" id="protocol_8h_html_ab93567ea63b592b8a3a29247d4942594"><div class="ttname"><a href="protocol_8h.html#ab93567ea63b592b8a3a29247d4942594">RQ_READ_SN</a></div><div class="ttdeci">#define RQ_READ_SN</div><div class="ttdef"><b>Definition:</b> <a href="protocol_8h_source.html#l00019">protocol.h:19</a></div></div>
<div class="ttc" id="main_8h_html_a047e1624760aa8b1025e7f151fd27b8b"><div class="ttname"><a href="main_8h.html#a047e1624760aa8b1025e7f151fd27b8b">RS232_RX_Pin</a></div><div class="ttdeci">#define RS232_RX_Pin</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00087">main.h:87</a></div></div>
<div class="ttc" id="structuart__handler__t_html"><div class="ttname"><a href="structuart__handler__t.html">uart_handler_t</a></div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00089">usart.h:89</a></div></div>
<div class="ttc" id="main_8h_html_ab5d7b83b264f6bb5e52f8d7d006e396a"><div class="ttname"><a href="main_8h.html#ab5d7b83b264f6bb5e52f8d7d006e396a">RS485_RE_Pin</a></div><div class="ttdeci">#define RS485_RE_Pin</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00167">main.h:167</a></div></div>
<div class="ttc" id="struct_cash_buff_rx_html_af9ffaf00f288857651b3b5fd57337ca4"><div class="ttname"><a href="struct_cash_buff_rx.html#af9ffaf00f288857651b3b5fd57337ca4">CashBuffRx::data_cnt</a></div><div class="ttdeci">uint8_t data_cnt</div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00058">usart.h:58</a></div></div>
<div class="ttc" id="gpio_8c_html_a84f88a73b7bafb4c856cb7ba9f6fe8b5"><div class="ttname"><a href="gpio_8c.html#a84f88a73b7bafb4c856cb7ba9f6fe8b5">gpio_init</a></div><div class="ttdeci">void gpio_init()</div><div class="ttdef"><b>Definition:</b> <a href="gpio_8c_source.html#l00137">gpio.c:137</a></div></div>
<div class="ttc" id="struct_cash_buff_rx_html_ab5b7d59224b89ac190735c1f59ac2335"><div class="ttname"><a href="struct_cash_buff_rx.html#ab5b7d59224b89ac190735c1f59ac2335">CashBuffRx::buffer</a></div><div class="ttdeci">uint8_t buffer[UART_DATA_BUF_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00056">usart.h:56</a></div></div>
<div class="ttc" id="protocol_8h_html_a3d3e0b6be8797f45aefe0a4c84336cb8"><div class="ttname"><a href="protocol_8h.html#a3d3e0b6be8797f45aefe0a4c84336cb8">READ_SETTINGS_RQ</a></div><div class="ttdeci">#define READ_SETTINGS_RQ</div><div class="ttdef"><b>Definition:</b> <a href="protocol_8h_source.html#l00017">protocol.h:17</a></div></div>
<div class="ttc" id="group__uarts_html_ga8a2affb985350de694f4a86e08226f75"><div class="ttname"><a href="group__uarts.html#ga8a2affb985350de694f4a86e08226f75">Uart_ini</a></div><div class="ttdeci">void Uart_ini(en_baudrate_t en_baudrate)</div><div class="ttdef"><b>Definition:</b> <a href="usart_8c_source.html#l00050">usart.c:50</a></div></div>
<div class="ttc" id="group__uarts_html_ga5c6e235e024a5a41e8c586a580891853"><div class="ttname"><a href="group__uarts.html#ga5c6e235e024a5a41e8c586a580891853">CASH_LEVEL</a></div><div class="ttdeci">#define CASH_LEVEL</div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00054">usart.h:54</a></div></div>
<div class="ttc" id="main_8h_html_a18edc7df1ce9a66f74a558bf05e98d9e"><div class="ttname"><a href="main_8h.html#a18edc7df1ce9a66f74a558bf05e98d9e">CRM_GPIO_RS485_RX_PERIPH_CLOCK</a></div><div class="ttdeci">#define CRM_GPIO_RS485_RX_PERIPH_CLOCK</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00180">main.h:180</a></div></div>
<div class="ttc" id="protocol_8h_html_a58fcfd827704ba9822ba830744aed9e9"><div class="ttname"><a href="protocol_8h.html#a58fcfd827704ba9822ba830744aed9e9">RQ_READ_PAGE_DATA</a></div><div class="ttdeci">#define RQ_READ_PAGE_DATA</div><div class="ttdef"><b>Definition:</b> <a href="protocol_8h_source.html#l00026">protocol.h:26</a></div></div>
<div class="ttc" id="main_8h_html_abfb5fe8738e6b19b5479da60668372dd"><div class="ttname"><a href="main_8h.html#abfb5fe8738e6b19b5479da60668372dd">RS232_TX_Pin</a></div><div class="ttdeci">#define RS232_TX_Pin</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00083">main.h:83</a></div></div>
<div class="ttc" id="protocol_8h_html_a53f7d8bae49b7a369b58e626a0c5c02b"><div class="ttname"><a href="protocol_8h.html#a53f7d8bae49b7a369b58e626a0c5c02b">RQ_READ_OPT_BYTE</a></div><div class="ttdeci">#define RQ_READ_OPT_BYTE</div><div class="ttdef"><b>Definition:</b> <a href="protocol_8h_source.html#l00034">protocol.h:34</a></div></div>
<div class="ttc" id="group__uarts_html_ga0f6c7c382009c8c58f5f34cae689e60a"><div class="ttname"><a href="group__uarts.html#ga0f6c7c382009c8c58f5f34cae689e60a">usart_get_msg</a></div><div class="ttdeci">u8 usart_get_msg(uart_name_t name, uint8_t *p_data, int *pCnt, typeInpPack *Type)</div><div class="ttdef"><b>Definition:</b> <a href="usart_8c_source.html#l00219">usart.c:219</a></div></div>
<div class="ttc" id="group__uarts_html_ga01f75b9a0b38f4ef7f8b3e17218f2c8b"><div class="ttname"><a href="group__uarts.html#ga01f75b9a0b38f4ef7f8b3e17218f2c8b">gpio_init_struct</a></div><div class="ttdeci">gpio_init_type gpio_init_struct</div><div class="ttdef"><b>Definition:</b> <a href="usart_8c_source.html#l00010">usart.c:10</a></div></div>
<div class="ttc" id="group__uarts_html_ggae2ba0ad082f30d5ed13df707e8a6071aa0664580bba46b3e0db74892b9bc8ff75"><div class="ttname"><a href="group__uarts.html#ggae2ba0ad082f30d5ed13df707e8a6071aa0664580bba46b3e0db74892b9bc8ff75">BR19200</a></div><div class="ttdef"><b>Definition:</b> <a href="usart_8h_source.html#l00038">usart.h:38</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="usart_8c.html">usart.c</a></li>
    <li class="footer">Создано системой
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
